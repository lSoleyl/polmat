<html>
  <head>
    <meta charset="UTF-8">
    <script src="./js/jquery-2.1.4.js"></script>
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/polmat.css">
    <link rel="stylesheet" href="./css/polmat-print.css" media="print">
    <script src="./js/smath.js"></script>
    <script src="./js/random.js"></script>

    <script src="./js/excerciseData.js"></script>
    <script src="./js/bootstrap.min.js"></script>

    <script src="./js/polmat.js"></script>
    <title>Polizeitest - Mathe Textaufgaben</title>

    <script>
    function cookieValue(value) {
      if (!value) { //Read access
        var seedStr = document.cookie.split(';').find(function(x) { return x.search("seed=") != -1 })

        if (!seedStr)
          return null
        else 
          return seedStr.substr("seed=".length)
      } else {
        document.cookie = 'seed=' + value
      }
    }




    function reloadVariables() {
      var seed = parseInt($("#seed").val())
      document.reloadVars(seed)

      $("span.variable[name]").each(function(i,element) { //Update values
        var varSpan = $(element)
        var div = varSpan.closest("div[ex]")
        if (!div) {
          console.error("Missing parent excercise div for following element:")
          console.log(element)
        } else {
          var excercise = div.attr('ex')
          var varName = varSpan.attr('name')
          varSpan.text(document.variables[excercise][varName])
        }
      })

      $("span.constant[name]").each(function(i,element) { //Set constants
        var constSpan = $(element)
        var varName = constSpan.attr('name')

        constSpan.text(document.constants[varName])
      })
    }



    $(function() {
      //Set seed value: cookie or current time
      $('#seed').val(cookieValue() || (new Date()).getTime())
      cookieValue($('#seed').val())

      $('#recalc').click(function() {
        cookieValue($('#seed').val())
        reloadVariables()
      })

      $('#new-seed').click(function() {
        $('#seed').val((new Date()).getTime())
        cookieValue($('#seed').val())
        reloadVariables()
      })

      reloadVariables()
    })

    </script>

  </head>
  <body>
    <div class="container">
      <!-- Header/Config -->
      <div class="form-group form-inline">
        <label>Seed</label>
        <div class="input-group">
          <div class="input-group-addon hoverGrey no-select dont-print" id="new-seed">Neu</div>
          <input type="text" value="" class="form-control" id="seed">
        </div>
        <input type="button" class="btn btn-default dont-print" value="Aufgaben neu berechnen" id="recalc">
      </div>


      <!-- Actual content -->
      <div class="page">
        <h2>Aufgaben</h2>

        
        <div ex=1> <!-- Excercise 1 -->
          <h3>Aufgabe 1</h3>
          Ein Motoroller verbraucht <var name="usage"></var> Liter Benzin auf <const name="100km"></const> km. Wie viel verbraucht er auf <var name="distance"></var> km und wie viele Kilometer kann er mit einem <var name="fuel"></var> Liter fassenden Tank fahren?
        </div>

        <div ex=2>
          <h3>Aufgabe 2</h3>
          Ein Malergeselle renoviert ein Zimmer von <var name="mg"></var>m² an einem Arbeitstag (<const name="workday"></const> Stunden). Der Azubi schafft in dieser Zeit nur <span class="variable">1/<var name="azubiF"></var></span> dieser Arbeitsleistung. Der Meister arbeitet noch schneller als der Geselle und liegt damit <var name="masterP"></var>% höher in der Arbeitsleistung. Wie hoch ist die Differenz der geleisteten Arbeit (renovierter Raum in m²) zwischen bestem und schlechtestem Ergebnis nach <var name="workdays"></var> Arbeitstagen?

        </div>

        <div ex=3>
          <h3>Aufgabe 3</h3>
          Ein Händer kauft für <var name="m0"></var>€ Gewürzpartien. An jeder verkauften Gewürzpartie verdient er 
          <var name="unitprofit"></var>€ (Gewinn). Nach Verkauf seines Gesamtbestandes hat er <var name="m1"></var>€ eingenommen.
          Wie viele Gewürzpartien hatte er?
        </div>
      </div>



      <!-- solutions -->
      <hr class="dont-print">
      <div class="page">
        <h2>Lösungen</h2>
        <div ex=1>
          <h3>Aufgabe 1</h3>
          <div>
            <mid>a)</mid>
            <frac>
              <top>
                <var name="usage"></var>L
              </top>
              <bottom>
                <const name="100km"></const>km
              </bottom>
            </frac>

            <mid> &middot; <var name="distance"></var>km</mid>

            <input class="eq">

            <mid>
              <var name="usage"></var>L &middot;
            </mid>
            <frac>
              <top>
                <var name="distance"></var>km
              </top>
              <bottom>
                <const name="100km"></const>km
              </bottom>
            </frac>

            <input class="eq">
           
            <mid>
              <var name="usage"></var>L &middot; <var name="res0"></var>
            </mid>

            <input class="eq">

            <mid><u><var name="res1"></var>L</u> (Verbrauch auf <var name="distance"></var>km)</mid>
          </div>
          <div>
            <mid>b)</mid>
            <frac>
              <top>
                <var name="usage"></var>L
              </top>
              <bottom>
                <const name="100km"></const>km
              </bottom>
            </frac>

            <input class="eq">

            <frac>
              <top>
                <var name="fuel"></var>L
              </top>
              <bottom>
                <var>X</var> km
              </bottom>
            </frac>

            <input class="equiv">

            <mid><var>X</var></mid>

            <input class="eq">

            <frac>
              <top>
                <var name="fuel"></var>L &middot; <const name="100km"></const>km
              </top>
              <bottom>
                <var name="usage"></var>L
              </bottom>
            </frac>

            <input class="eq">

            <mid><var name="res2"></var> &middot; <const name="100km"></const>km</mid>

            <input class="eq">

            <mid><var name="res3"></var>km (Reichweite bei einer Tankfüllung von <var name="fuel"></var>L)</mid>
          </div>
        </div>

        <div ex=2> <!-- Exercise 2 -->
          <h3>Aufgabe 2</h3>
          Zuerst Arbeitsleistung von Azubi (schlechteste Leistung) und Meister (beste Leistung) pro Arbeitstag (=<const name="workday"></const> h) anhand der Informationen über den Gesellen bestimmen:
          <div> <!-- Malegeselle -->
            <mid>Geselle</mid>
            <input class="eq">
            <frac>
              <top>
                <var name="mg"></var>m²
              </top>
              <bottom>
                <const name="workday"></const>h
              </bottom>
            </frac>
          </div>
          <div> <!-- Azubi -->
            <mid>Azubi</mid> 
            <input class="eq">
            <frac class="variable">
              <top>1</top>
              <bottom><var name="azubiF"></var></bottom>
            </frac>
            <mid> &middot; Geselle</mid>

            <input class="eq">
            <frac class="variable">
              <top>1</top>
              <bottom><var name="azubiF"></var></bottom>
            </frac>
            <mid>&middot;</mid>
            <frac>
              <top>
                <var name="mg"></var>m²
              </top>
              <bottom>
                <const name="workday"></const>h
              </bottom>
            </frac>
            <input class="eq">

            <frac>
            <top><var name="azubi"></var>m²</top>
            <bottom><const name="workday"></const>h</bottom>
            </frac>
          </div> 
          <div>
            <mid>Meister</mid>
            <input class="eq">
            <mid>Geselle + <var name="masterP"></var>%</mid>
            <input class="eq">
            <mid>Geselle + </mid>
            <frac>
            <top><var name="masterP"></var></top>
            <bottom>100</bottom>
            </frac>
            <mid>&middot; Geselle</mid>

            <input class="eq">

            <frac>
              <top><var name="masterZ"></var></top>
              <bottom>100</bottom>
            </frac>
            <mid>&middot; Geselle</mid>
            <input class="eq">

            <frac>
              <top><var name="masterZ2"></var></top>
              <bottom><var name="masterN2"></var></bottom>
            </frac>
            <mid>&middot; Geselle</mid>
            <input class="eq">

            <frac>
              <top><var name="masterZ2"></var></top>
              <bottom><var name="masterN2"></var></bottom>
            </frac>
            <mid>&middot;</mid>

            <frac>
              <top>
                <var name="mg"></var>m²
              </top>
              <bottom>
                <const name="workday"></const>h
              </bottom>
            </frac>

            <input class="eq">
            
            <frac>
              <top>
                <var name="master"></var>m²
              </top>
              <bottom>
                <const name="workday"></const>h
              </bottom>
            </frac>
          </div>
          <div>
            Da alle Brüche <const name="workday"></const>h (= 1 Arbeitstag) im Nenner haben, müssen sie nur mit <var name="workdays"></var> erweitert werden, um auf die Arbeitsleistung von <var name="workdays"></var> Arbeitstagen zu kommen.
          </div>
          <div>
            <mid>Azubi</mid>
            <input class="eq">
            <frac>
              <top><var name="azubiR"></var>m²</top>
              <bottom><var name="workhours"></var>h</bottom>
            </frac>
          </div>
          <div>
            <mid>Meister</mid>
            <input class="eq">
            <frac>
              <top><var name="masterR"></var>m²</top>
              <bottom><var name="workhours"></var>h</bottom>
             </frac>
          </div>
          <div>
            <mid>Meister - Azubi</mid>
            <input class="eq">
            <mid><var name="masterR"></var>m² - <var name="azubiR"></var>m²</mid>
            <input class="eq">
            <mid><var name="result"></var>m²</mid>
          </div>
          <div>
          Der Meister schafft innerhalb von <var name="workdays"></var> Arbeitstagen <var name="result"></var>m² mehr als der Azubi.
          </div>
        </div>

        <div ex=3> <!-- Excercise 3 -->
          <h3>Aufgabe 3</h3>
          <div>
            <mid>Gewinn</mid>
            <input class="eq">
            <mid>Erlös - Kosten</mid>
            <input class="eq">
            <mid><var name="m1"></var>€ - <var name="m0"></var>€</mid>
            <input class="eq">
            <mid><var name="totalprofit"></var>€</mid>
          </div>
          <div>
            <mid>Verkaufte Waren</mid>
            <input class=eq>
            <frac>
              <top>Gewinn</top>
              <bottom>Gewinn pro Ware</bottom>
            </frac>
            <input class=eq>
            <frac>
              <top><var name="totalprofit"></var>€</top>
              <bottom><var name="unitprofit"></var>€</bottom>
            </frac>
            <input class="eq">
            <mid><var name="units"></var></mid>
          </div>
          <div>
          <br/>
            Der Händer hat <var name="units"></var> Gewürzpartien gekauft und wieder verkauft
          </div>
        </div>
      </div>
    </div>
  </body>
</html>